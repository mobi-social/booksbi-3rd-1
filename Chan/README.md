# 쏙쏙들어오는 함수형 코딩 정리

# 4.16 (~38p까지)

## 함수형 코딩이란?

순수함수를 사용하고 부수효과(side effect)를 피하는 것이 특징인 프로그래밍 패러다임이다.

부수효과를 피하기 위해 함수형 프로그래밍을 사용하지만 부수효과는 꼭 사용해야 한다. 순수함수란 결과값이 입력값에만 입력값에만 의존하는 함수이지만 우리가 함수를 사용하는 이유는 값만을 얻어내기 위한 것이 아닌 어떤 **동작**을 실행시키기 위함이다.

부수효과를 잘 다루기 위해서 이 글에서는 `액션`, `계산`, `데이터` 세가지의 형태로 분류하는 방법에 대해 강조한다.

## 액션

액션에서 기억해야할 것은 `시간`이다.<br/>
액션은 실행횟수, 실행시점 둘다 의존하게 되는데 이를 간단하게 JS코드로 생각해보자.

```JS
const someFunction = ()=>{
  let a = 1000
  // (1) console.log(a)
  let a = 1
  // (2) console.log(a)
}
```

다음과같이 언제 실행하냐에 따라 console.log(a)의 값이 바뀌는 것처럼 실행시점에 의존하게 되는것이다.

액션을 다룰때 언제 몇번 다룰것인지에 따라 결과가 바뀔 수 있음으로 항상 주의해야할 필요가 있다.

## 계산

계산은 같은 입력값이라면 언제든지 같은 출력값을 보장하는 것이다.<br/>
그렇기에 액션과 다르게 언제 몇번 실행하든 신경쓰지 않아도 된다.

## 데이터

데이터는 이벤트에 대한 기록값이다. 데이터 자체로도 의미가 있으며 데이터를 여러 형태로 사용할 수 있다. 우리가 서버에서 받아온 데이터를 어떤방식으로 화면에 나태낼지 개발자의 의도대로 사용할 수 있는 것처럼 말이다.

코드의 과정을 살펴보면 모두 액션처럼 보일 수있지만 이를 하나 씩 풀어서 생각해보면 그사이에 계산 데이터가 포함되어있는 것을 알 수 있게된다.
앞으로의 과정을 통해 이를 구분하고 다루는 내용을 알아보자.

## 4.17 (~54p까지)

데이터베이스에서 가져온 데이터를 바탕으로 구독자에게 어떤 쿠폰을 줄건지 결정하는 예시를 통해 액션, 데이터, 계산 을 어떻게 코드에 적용할 수 있는지 알아봤다.

결국 지금까지 우리가 작업해 왔던 것들을 토대로 생각해보면 `액션 === 함수` `계산 === 함수` `데이터 === 데이터` 인데 그럼 액션과 계산은 둘다함수인데 무엇이다를까?

액션은 주로 서버와의 통신을 위한 함수를 의미하는 것같다. 언제 보내느냐 몇번 보내느냐에 따라 매번 결과가 달라질 여지가 있는반면 우리가 정의해서 사용하는 함수들은 같은 입력값엔 항상 같은 결과값을 보장해주기때문이다.

이를 토대로생각해보면 커다란 액션이란 함수안에 어떤 계산들을 사용할 것이고 어떤 데이터를 다룰건지 고려해서 프로그램을짜면되기때문에 책에서 제시하는 방법은 데이터 > 계산 > 액션 순서로 생각해 볼 것을 권장하고있다.
데이터는 다루기에 제약이 가장 많고 계산 액션순으로 제약이 적기때문이다.

이를 토대로 프로젝트를 설계할때 어떤데이터를 다루게 될지 예상해보는 것이 중요할 것이라는 생각이든다. 어떤 형태의 데이터를 다룰지에 따라 그 데이터를 가공해줄 함수를 정의 할 수 있게되고 이를통해 얻어진 결과를 서버로 전송해주기위해 액션을 실행하는 형식으로 생각 해 봐야할 것 같다.

## 4.18 (~78p까지)

이전 내용에 이어서 `액션`을 서버통신을 위한 함수 라고 이해했엇는데 그것이 아니었다. 함수안에서 `액션` 을실행하게 되면 액션은 시간 과 횟수에 영향을 받기때문에 함수안에서 실행된 액션에따라서 액션을 포함한 함수또한 그 영향으로 액션이되고 이는 계속해서 상위 함수로 퍼져나간다.
React에서 함수형 컴포넌트를 다루기때문에 액션이 계속퍼져나가는 것은 바람직하지 못해 보인다. 그렇다면 어떻게 액션을 다룰 것인가.

이전 todoList에서 급하게 코드를 작성하느라 절차적인 방법으로 동작을 완성시켰는데 이후 refactor과정에서 큰 어려움을 겪었다. 이유는 얽혀있는 액션들때문에 코드들이 서로 영향을 받고 이를 분리해내는 것이 요인이었다.

절차적인 코드를 refactor하기위해선 액션에서 계산을 빼내는 과정을 통해 이를 실현할 수 있다.

모든 함수에는 입력과 출력이 존재하고 각각 이는 각각 명시적,암묵적 입출력으로 볼 수 있다.

명식적이란 우리가 선언부에 paramter를 정의하는 것이고 이렇게 선언된 parameter에는 실행부에서 어떤 값을 입력해주냐에 따라 값이 결정되게된다.

반면 암묵적 입력이란 매개변수에 의해 결정되는 값이아닌 전역변수에의해 결정되는 입력이다.

액션에서 계산을 분리하는 이유는 그렇게함으로서 코드끼리의 의존성을 낮출 수 있고 이는 재사용, 테스트에서 유리하기 때문이다.

그렇다면 계산을 분리하기위해선 명시적입출력의 형태로 바꿔주고 암묵적 입출력을 없에는 방향으로 refactor를 진행해야 한다.

함수들은 각각 계산하는 관심사에따라 따로 함수를 선언해주고 이때 사용될 paramter들을 명시적으로 작성해서 각각관리하게 되면 코드의 진행을 이해하기 수월해지고 재사용,테스트 하기에 더 좋은 구조가된다.

여기서 의문점은 계산 = 함수의형태이고 이는 코드가 길어질 것이 분명한데 이렇게 액션을 위해서 여러함수를 선언해주고 관리하는것이 과연 효율적일까?
라는 의문이 있는데 78p의 내용까지만을 봤을땐 재사용과 테스트하기위해서는 효과적인 측면이 존재하긴 한다.
